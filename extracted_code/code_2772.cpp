int main ( void ) { int N , line ; scanf ( "%d" , & N ) ; while ( N -- ) { scanf ( "%d" , & line ) ; int * * input ; input = ( int * * ) malloc ( line * sizeof ( int * ) ) ; int j , i = 0 ; for ( ; i < line ; i ++ ) { input [ i ] = malloc ( sizeof ( int ) * ( i + 1 ) ) ; for ( j = 0 ; j <= i ; j ++ ) scanf ( "%d" , & input [ i ] [ j ] ) ; } int * * output ; output = ( int * * ) malloc ( line * sizeof ( int * ) ) ; for ( i = 0 ; i < line ; i ++ ) { output [ i ] = malloc ( sizeof ( int ) * ( i + 1 ) ) ; for ( j = 0 ; j < line ; j ++ ) output [ i ] [ j ] = 0 ; } for ( j = 0 ; j < line ; j ++ ) output [ line - 1 ] [ j ] = input [ line - 1 ] [ j ] ; for ( i = line - 2 ; i >= 0 ; i -- ) { for ( j = i ; j >= 0 ; j -- ) { int max ; if ( output [ i + 1 ] [ j + 1 ] > output [ i + 1 ] [ j ] ) max = output [ i + 1 ] [ j + 1 ] ; else max = output [ i + 1 ] [ j ] ; output [ i ] [ j ] = max + input [ i ] [ j ] ; } } printf ( "%d\n" , output [ 0 ] [ 0 ] ) ; for ( i = 0 ; i < line ; i ++ ) { free ( input [ i ] ) ; free ( output [ i ] ) ; } free ( input ) ; free ( output ) ; } }