int main ( ) { int n = 0 ; scanf ( "%d" , & n ) ; int i = 0 , row = 0 , column = 0 , size , numRows = 0 , num = 0 , sum1 = 0 ; int parent1 = - 1 , parent2 = - 1 , sum2 = 0 , max = 0 , index = 0 , parentIndex = 0 ; int * sum = NULL ; for ( i = 0 ; i < n ; i ++ ) { scanf ( "%d" , & numRows ) ; if ( size < numRows * ( numRows + 1 ) / 2 ) { size = numRows * ( numRows + 1 ) / 2 ; sum = ( int * ) realloc ( sum , sizeof ( int ) * size ) ; } parent1 = - 1 ; parent2 = - 1 ; parentIndex = 0 ; for ( row = 1 ; row <= numRows ; row ++ ) { for ( column = 1 ; column <= row ; column ++ ) { scanf ( "%d" , & num ) ; sum1 = parent1 > - 1 ? sum [ parent1 ] : 0 ; sum2 = parent2 > - 1 ? sum [ parent2 ] : 0 ; max = sum1 > sum2 ? sum1 : sum2 ; sum [ index ++ ] = max + num ; parent1 = parent2 ; if ( column == ( row - 1 ) ) { parent2 = - 1 ; } else { parent2 = parentIndex ++ ; } } } } for ( column = index - numRows ; column < index ; column ++ ) { max = max > sum [ column ] ? max : sum [ column ] ; } printf ( "%d\n" , max ) ; return 0 ; }