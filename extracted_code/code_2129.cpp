int main ( ) { int t , n , * p , i , j , k , sum ; scanf ( "%d" , & t ) ; while ( t -- ) { scanf ( "%d" , & n ) ; p = ( int * ) malloc ( n * n * sizeof ( int ) ) ; for ( i = 0 ; i < n ; i ++ ) { j = 0 ; for ( ; j < i + 1 ; j ++ ) { scanf ( "%d" , p + i + j ) ; } } sum = 0 ; k = 0 ; for ( i = 1 ; i <= n - 2 ; i ++ ) { if ( * ( p + i + n - 2 ) > * ( p + n - 2 + k ) ) k = i ; } sum = sum + * ( p + k + n - 2 ) ; if ( * ( p + k + n - 1 ) > * ( p + k + 1 + n - 1 ) ) sum = sum + * ( p + k + n - 1 ) ; else sum = sum + * ( p + k + 1 + n - 1 ) ; for ( i = n - 3 ; i >= 0 ; i -- ) { if ( k > 0 ) { if ( * ( p + i + k ) > * ( p + i + k - 1 ) ) { sum = sum + * ( p + i + k ) ; } else { sum = sum + * ( p + i + k - 1 ) ; k = k - 1 ; } } else sum = sum + * ( p + i + k ) ; } free ( p ) ; printf ( "%d\n" , sum ) ; } return 0 ; }