int main ( ) { int n_lines ; scanf ( "%d" , & n_lines ) ; while ( n_lines != 0 ) { int n ; scanf ( "%d" , & n ) ; int arr [ n ] [ n ] , i , j ; int no = 1 ; for ( i = 0 ; i < n ; i ++ ) { for ( j = 0 ; j < i + 1 ; j ++ ) { scanf ( "%d" , & arr [ i ] [ j ] ) ; } no = no * 2 ; } no = no / 2 ; int sum [ no ] [ no ] , cout , k , r , a [ no ] [ no ] ; sum [ 0 ] [ 0 ] = arr [ 0 ] [ 0 ] ; a [ 0 ] [ 0 ] = 0 ; for ( i = 1 ; i < n ; i ++ ) { cout = 0 , r = 1 ; for ( k = 0 ; k < i ; k ++ ) { r = r * 2 ; } for ( j = 0 ; j < r ; j += 2 ) { sum [ i ] [ j ] = sum [ i - 1 ] [ cout ] + arr [ i ] [ a [ i - 1 ] [ cout ] ] ; a [ i ] [ j ] = a [ i - 1 ] [ cout ] ; sum [ i ] [ j + 1 ] = sum [ i - 1 ] [ cout ] + arr [ i ] [ a [ i - 1 ] [ cout ] + 1 ] ; a [ i ] [ j + 1 ] = a [ i - 1 ] [ cout ] + 1 ; cout ++ ; } } int max = sum [ n - 1 ] [ 0 ] ; for ( i = 0 ; i < no ; i ++ ) { if ( sum [ n - 1 ] [ i ] > max ) max = sum [ n - 1 ] [ i ] ; } printf ( "%d\n" , max ) ; n_lines -- ; } return 0 ; }