int main ( int argc , char * argv [ ] ) { int t , j , max ; int n , i , a , b , c , index , no_need ; int sum = 0 ; scanf ( "%d" , & t ) ; while ( t -- ) { sum = 0 ; max = b = c = a = no_need = i = j = index = 0 ; scanf ( "%d" , & n ) ; for ( i = 0 ; i < n ; i ++ ) { if ( i == 0 ) { scanf ( "%d" , & a ) ; max = a ; index = 0 ; } else { for ( j = 0 ; j < index ; j ++ ) scanf ( "%d" , & no_need ) ; scanf ( "%d%d" , & b , & c ) ; if ( b > c ) max = b ; else { max = c ; index ++ ; } for ( j = index + 1 ; j < i ; j ++ ) scanf ( "%d" , & no_need ) ; } sum += max ; } printf ( "%d\n" , sum ) ; } return 0 ; }