int main ( ) { long int max ; int t ; int x , y ; int wp1 , wp2 ; scanf ( "%d" , & t ) ; int n ; int k ; int q , w ; while ( t > 0 ) { scanf ( "%d" , & n ) ; int a [ 100 ] [ 100 ] = { 0 } ; int i , j ; for ( q = 0 ; q < n ; q ++ ) { for ( w = 0 ; w <= q ; w ++ ) { scanf ( "%d" , & a [ q ] [ w ] ) ; } } i = n - 1 ; max = a [ i ] [ 0 ] + a [ i - 1 ] [ 0 ] ; for ( j = 1 ; j < n ; j ++ ) { if ( a [ i ] [ j ] + a [ i - 1 ] [ j ] > max ) { max = a [ i ] [ j ] + a [ i - 1 ] [ j ] ; x = j ; y = i - 1 ; } if ( a [ i ] [ j ] + a [ i - 1 ] [ j - 1 ] > max ) { max = a [ i ] [ j ] + a [ i - 1 ] [ j - 1 ] ; x = j - 1 ; y = i - 1 ; } } while ( y != 0 ) { if ( x == 0 ) { for ( k = y - 1 ; k >= 0 ; k -- ) max = max + a [ k ] [ 0 ] ; break ; } wp1 = max + a [ x ] [ y - 1 ] ; wp2 = max + a [ x - 1 ] [ y - 1 ] ; if ( wp2 >= wp1 ) { x = x - 1 ; y = y - 1 ; max = wp2 ; } else { y = y - 1 ; max = wp1 ; } } printf ( "%ld\n" , max ) ; t = t - 1 ; } return 0 ; }