int m , i , j , k , l , n , * p , * q , s , b [ 9999 ] ; int z ( int a , int b ) { return a > b ? a : b ; } void assert2 ( ) { while ( 1 ) { } } void f ( ) { p ++ , i ++ , k ++ ; if ( k == j ) { k = 0 ; j ++ ; p -- ; } assert2 ( p - b < 9999 ) ; q = p - 1 ; assert2 ( q - b < 9999 ) ; } int main ( ) { scanf ( "%d" , & m ) ; while ( m -- ) { scanf ( "%d" , & n ) ; for ( i = k = 0 , j = 1 , p = b ; i * 2 < n * n + n ; f ( ) ) { assert2 ( & ( b [ i ] ) - p == j - 1 ) ; scanf ( "%d" , & s ) ; l = z ( l , ( b [ i ] = s + ( ( i > 0 ) ? ( ( k > 0 ) ? ( ( k < j - 1 ) ? z ( * p , * q ) : * q ) : * p ) : 0 ) ) ) ; } printf ( "%d\n" , l ) ; } }