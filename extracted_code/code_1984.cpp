int main ( ) { int b [ 101 ] [ 101 ] , a [ 20001 ] , i , j , n , k = 1 , x [ 1000 ] = { 0 } , t , m , n1 , n2 ; a [ 0 ] = 0 ; scanf ( "%d" , & t ) ; for ( m = 0 ; m < t ; m ++ ) { scanf ( "%d" , & n ) ; for ( i = 0 ; i < 20001 ; i ++ ) { a [ i ] = 0 ; } for ( i = 0 ; i < n ; i ++ ) { for ( j = 0 ; j <= i ; j ++ ) { scanf ( "%d" , & b [ i ] [ j ] ) ; } } a [ 1 ] = b [ 0 ] [ 0 ] ; a [ 2 ] = b [ 1 ] [ 0 ] + b [ 0 ] [ 0 ] ; a [ 3 ] = b [ 1 ] [ 1 ] + b [ 0 ] [ 0 ] ; a [ 4 ] = a [ 2 ] + b [ 2 ] [ 0 ] ; a [ 5 ] = a [ 2 ] + b [ 2 ] [ 1 ] ; a [ 6 ] = a [ 3 ] + b [ 2 ] [ 1 ] ; a [ 7 ] = a [ 3 ] + b [ 2 ] [ 2 ] ; k = 8 ; for ( i = 3 ; i < n ; i ++ ) { for ( j = 0 ; j < i ; j ++ ) { if ( ( j == 0 ) || ( j == i - 1 ) ) { n1 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 3 ; a [ k ] = b [ i ] [ j ] + a [ n1 ] ; ++ k ; n2 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 3 ; a [ k ] = b [ i ] [ j + 1 ] + a [ n2 ] ; ++ k ; } else { n1 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 3 ; a [ k ] = b [ i ] [ j ] + a [ n1 ] ; ++ k ; n1 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 4 ; a [ k ] = b [ i ] [ j ] + a [ n1 ] ; ++ k ; n2 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 3 ; a [ k ] = b [ i ] [ j + 1 ] + a [ n2 ] ; ++ k ; n2 = ( ( i - 1 ) * ( i - 1 ) ) - i + j + 4 ; a [ k ] = b [ i ] [ j + 1 ] + a [ n2 ] ; ++ k ; } } } for ( i = 1 ; i <= 2 * n * n ; i ++ ) { if ( x [ m ] < a [ i ] ) { x [ m ] = a [ i ] ; } } } i = 0 ; while ( i < t ) { printf ( "%d\n" , x [ i ] ) ; i ++ ; } return 0 ; }