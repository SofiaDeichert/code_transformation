int main ( ) { int count ; int row ; int numbers [ 100 ] ; int i , m ; int sum [ 100 ] = { 0 } ; int max_number ; int a , b , c ; scanf ( "%d" , & count ) ; while ( count > 0 ) { scanf ( "%d" , & row ) ; for ( i = 0 ; i < 100 ; i ++ ) { sum [ i ] = 0 ; } for ( i = 0 ; i < row ; i ++ ) { m = 0 ; while ( m < i + 1 && ( scanf ( "%d" , & numbers [ m ] ) ) == 1 ) { m ++ ; } for ( m = 0 ; m <= i ; m ++ ) { if ( m - 1 >= 0 ) a = numbers [ m - 1 ] + sum [ m ] ; else a = 0 ; b = numbers [ m ] + sum [ m ] ; if ( m + 1 < i ) c = numbers [ m + 1 ] + sum [ m ] ; else c = 0 ; max_number = a ; if ( b > max_number ) max_number = b ; if ( c > max_number ) max_number = c ; sum [ m ] = max_number ; } } max_number = 0 ; for ( i = 0 ; i < row ; i ++ ) { if ( sum [ i ] > max_number ) max_number = sum [ i ] ; } printf ( "%d\n" , max_number ) ; count -- ; } return 0 ; }