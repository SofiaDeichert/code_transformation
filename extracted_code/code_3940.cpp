void maxsum ( int * * , int ) ; int main ( void ) { int t , i , j ; scanf ( "%d" , & t ) ; while ( t -- ) { int n , * * ptr ; scanf ( "%d" , & n ) ; ptr = ( int * * ) malloc ( n * sizeof ( int * ) ) ; for ( i = 0 ; i < n ; i ++ ) ptr [ i ] = ( int * ) malloc ( ( i + 1 ) * sizeof ( int ) ) ; for ( i = 0 ; i < n ; i ++ ) { for ( j = 0 ; j <= i ; j ++ ) scanf ( "%d" , * ( ptr + i ) + j ) ; } maxsum ( ptr , n ) ; printf ( "%d\n" , * * ptr ) ; free ( ( int * * ) ptr ) ; } return 0 ; } void maxsum ( int * * ptr , int n ) { int i , j ; for ( i = n - 1 ; i >= 1 ; i -- ) { for ( j = i ; j >= 1 ; j -- ) { if ( * ( * ( ptr + i ) + j ) > * ( * ( ptr + i ) + ( j - 1 ) ) ) * ( * ( ptr + ( i - 1 ) ) + ( j - 1 ) ) += * ( * ( ptr + i ) + j ) ; else * ( * ( ptr + ( i - 1 ) ) + ( j - 1 ) ) += * ( * ( ptr + i ) + ( j - 1 ) ) ; } } }