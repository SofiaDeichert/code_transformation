int main ( ) { int t , n , l , m , k , s , i , j , temp [ 3 ] , temp1 ; scanf ( "%d" , & t ) ; while ( t -- ) { scanf ( "%d" , & n ) ; int a [ n ] [ n ] ; for ( i = 0 ; i < n ; i ++ ) for ( j = 0 ; j <= i ; j ++ ) scanf ( "%d" , & a [ i ] [ j ] ) ; l = 0 ; m = 0 ; k = a [ 0 ] [ 0 ] ; for ( i = 0 ; i < n - 2 ; i ++ ) { l = l + 1 ; temp [ 0 ] = a [ l ] [ m ] + a [ l + 1 ] [ m ] ; temp [ 1 ] = a [ l ] [ m ] + a [ l + 1 ] [ m + 1 ] ; temp [ 2 ] = a [ l ] [ m + 1 ] + a [ l + 1 ] [ m + 1 ] ; temp [ 3 ] = a [ l ] [ m + 1 ] + a [ l + 1 ] [ m + 2 ] ; temp1 = 0 ; for ( j = 0 ; j < 4 ; j ++ ) { if ( temp1 < temp [ i ] ) temp1 = temp [ i ] ; } if ( temp1 == temp [ 0 ] ) { s = a [ l ] [ m ] ; m = m ; } if ( temp1 == temp [ 1 ] ) { s = a [ l ] [ m ] ; m = m ; } if ( temp1 == temp [ 2 ] ) { s = a [ l ] [ m + 1 ] ; m = m + 1 ; } if ( temp1 == temp [ 3 ] ) { s = a [ l ] [ m + 1 ] ; m = m + 1 ; } k = k + s ; } if ( a [ l + 1 ] [ m ] > a [ l + 1 ] [ m + 1 ] ) k = k + a [ l + 1 ] [ m ] ; else k = k + a [ l + 1 ] [ m + 1 ] ; printf ( "\n%d\n" , k ) ; } return 0 ; }