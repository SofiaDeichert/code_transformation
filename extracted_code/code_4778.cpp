int main ( void ) { int i , j , k , l , row , repeat_factor = 2 , arr [ 150 ] [ 150 ] ; long int rowsum [ 300 ] , largestsum ; int N ; scanf ( "%d" , & N ) ; for ( i = 0 ; i < N ; i ++ ) { largestsum = 0 ; scanf ( "%d" , & row ) ; for ( j = 0 ; j < row ; j ++ ) { rowsum [ 2 * j ] = rowsum [ 2 * j + 1 ] = 0 ; for ( k = 0 ; k <= j ; k ++ ) scanf ( "%d" , & arr [ j ] [ k ] ) ; } repeat_factor = 2 ; for ( j = row - 1 ; j >= 0 ; j -- ) { for ( l = j ; l >= 0 ; l -- ) { for ( k = 0 ; k < repeat_factor ; k ++ ) { rowsum [ repeat_factor * j + k ] += arr [ j ] [ l ] ; } } repeat_factor *= 2 ; } largestsum = rowsum [ 0 ] ; for ( l = 1 ; l < 2 * row ; l ++ ) largestsum = ( largestsum > rowsum [ l ] ) ? largestsum : rowsum [ l ] ; printf ( "%ld" , largestsum ) ; } return 0 ; }