void main ( ) { long int t , i , j , n , a [ 100 ] [ 100 ] , temp ; long int sum = 0 , max , k , loc [ 100 ] , loc1 [ 100 ] , var = 0 , var1 = 0 ; int calc [ 100 ] ; scanf ( "%ld" , & t ) ; for ( i = 1 ; i <= t ; i ++ ) { scanf ( "%ld" , & n ) ; for ( j = 0 ; j < n ; j ++ ) { for ( k = 0 ; k < j + 1 ; k ++ ) { scanf ( "%ld" , & a [ j ] [ k ] ) ; } } j = n - 1 ; max = a [ j ] [ 0 ] ; for ( k = 0 ; k < j + 1 ; k ++ ) { if ( a [ j ] [ k ] > max ) { max = a [ j ] [ k ] ; } } for ( k = 0 ; k < j + 1 ; k ++ ) { if ( max == a [ j ] [ k ] ) { loc1 [ var ] = k ; var ++ ; } } sum += max ; while ( j != 0 ) { var1 = 0 ; k = 0 ; j -- ; while ( k < var ) { temp = loc1 [ k ++ ] ; if ( temp == 0 ) { calc [ var1 ] = a [ j ] [ 0 ] ; loc [ var1 ++ ] = 0 ; } else if ( temp == j ) { calc [ var1 ] = a [ j ] [ j ] ; loc [ var1 ++ ] = j ; } else { if ( a [ j ] [ temp ] > a [ j ] [ temp - 1 ] ) { calc [ var1 ] = a [ j ] [ temp ] ; loc [ var1 ++ ] = temp ; } else if ( a [ j ] [ temp ] < a [ j ] [ temp - 1 ] ) { calc [ var1 ] = a [ j ] [ temp - 1 ] ; loc [ var1 ++ ] = temp - 1 ; } else { calc [ var1 ] = a [ j ] [ temp - 1 ] ; loc [ var1 ++ ] = temp - 1 ; calc [ var1 ] = a [ j ] [ temp ] ; calc [ var1 ++ ] = temp ; } } } max = calc [ 0 ] ; for ( k = 0 ; k < var1 ; k ++ ) { if ( calc [ k ] > max ) { max = calc [ k ] ; } } var = 0 ; for ( k = 0 ; k < var1 ; k ++ ) { if ( max == calc [ k ] ) { loc1 [ var ] = loc [ k ] ; var ++ ; } } sum += max ; } printf ( "%ld" , sum ) ; sum = 0 ; } }